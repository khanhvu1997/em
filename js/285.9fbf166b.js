(globalThis["webpackChunkntv"]=globalThis["webpackChunkntv"]||[]).push([[285],{3517:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(120),r=s.n(a),n=s(9348),o=s.n(n),i=s(8765),c=s.n(i);r().extend(o()),r().extend(c()),r().getDateUnix=(e=r()().unix(),t="Asia/Tokyo")=>r().unix(e).tz(t),r().getDate=(e=r()(),t="Asia/Tokyo")=>r()(e).tz(t);const l=r()},568:e=>{const t=2;e.exports={DATE_WARNING:t}},4446:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var a=s(2250),r=s.n(a);class n{getRepository(e){const t=s(7044)(`./${e}.repository`);return t.default}}const o=new n;class i{constructor(e){r()(this,"serviceName",void 0),r()(this,"dao",void 0),this.serviceName=e,this.dao=o.getRepository(e)}}var c=s(539);class l extends i{async login(e){const{signIn:t}=(0,c.t)(),s=await this.dao.login(e),{code:a,payload:r}=s;0===a&&t(r)}async checklogin(){const{signIn:e,signOut:t}=(0,c.t)();try{const t=await this.dao.checklogin(),{code:s,payload:a}=t;0===s&&e(a)}catch(s){t()}}async getDashboards(){const e=await this.dao.getDashboards(),{code:t,payload:s}=e;return 0===t?s:null}async getListContent(e){const t=await this.dao.getListContent(e),{code:s,payload:a}=t;return 0===s?a:null}async getContentById(e){const t=await this.dao.getContentById(e),{code:s,payload:a}=t;return 0===s?a:null}async getListTag(){const e=await this.dao.getListTag(),{code:t,payload:s}=e;return 0===t?s:null}async getSuggestList(){const e=await this.dao.getSuggestList(),{code:t,payload:s}=e;return 0===t?s:{}}async updateUser(e){const t=await this.dao.updateUser(e),{message:s}=t;return s}async deleteReport(e){const t=await this.dao.deleteReport(e),{message:s}=t;return s}async updateViewMember(e,t){const s=await this.dao.updateViewMember(e,t),{code:a}=s;return 0===a}async getNotices(){const e=await this.dao.getNotices(),{code:t,payload:s}=e;return 0===t?s:null}}const u=new l("member")},1701:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(2250),r=s.n(a),n=s(1661),o=s.n(n),i=s(52),c=s.n(i),l=s(397),u=s(9533),d=s(539);function g(e,t){const s=Object.assign(t||{},{params:e});return s}var p=new WeakMap,w=new WeakMap;class v{constructor(e){o()(this,p,{writable:!0,value:void 0}),o()(this,w,{writable:!0,value:void 0}),r()(this,"onRequest",(async e=>{await this.extendTokenValidityPeriod();const{token:t}=(0,d.t)();return e.headers&&(e.headers.Authorization=`Bearer ${t}`),e})),this.client=this.createAxiosClient(),this.servicePath=e}createAxiosClient(){const e=c().create({baseURL:void 0,headers:{"Content-type":"application/json","x-api-key":void 0}});return e.interceptors.request.use(this.onRequest,this.onRequestError),e}onRequestError(e){return Promise.reject(e)}async extendTokenValidityPeriod(){}request(e,t,s,a){const{setLoading:r}=(0,u.q)();return new Promise(((n,o)=>{r(!0);const i=Object.assign(a,{url:`${this.servicePath}${t}`,method:e,data:s});this.client.request(i).then((e=>{const t=e.data;0!==t.code&&(l.Z.error(t.message),o(t)),n(t)})).catch((e=>{if(c().isAxiosError(e))if(e.response)if(e.response.data){const t=e.response.data;o(t)}else o(e);else e.request,o(e);else o(e);l.Z.exception(e)})).finally((()=>{r(!1)}))}))}get(e,t,s){const a=g(t,s);return this.request("GET",e,null,a)}post(e,t,s){const a=g(t,s);return this.request("POST",e,t,a)}put(e,t,s){const a=g(t,s);return this.request("PUT",e,t,a)}delete(e,t,s){const a=g(t,s);return this.request("DELETE",e,null,a)}}class h{constructor(e){r()(this,"client",void 0),this.client=new v(e)}}},2703:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(1701);class r extends a["default"]{constructor(){super("/member")}find(e){return this.client.get("",e)}login(e){return this.client.post("/login",e)}checklogin(){return this.client.get("/checklogin")}getDashboards(){return this.client.get("/dashboards")}getListContent(e){return this.client.get("/contents",e)}getContentById(e){return this.client.get(`/contents/${e}`)}getListTag(){return this.client.get("/tags")}deleteReport(e){return this.client.delete(`/reports/${e}`)}getSuggestList(){return this.client.get("/suggest-title")}updateUser(e){return this.client.put("/users",e)}updateViewMember(e,t){return this.client.post(`/contents/${e}/viewed`,t)}getNotices(){return this.client.get("/notices")}}const n=new r},397:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});s(6701);var a=s(6417);class r{success(e){a.Z.create({type:"positive",message:e})}warning(e){a.Z.create({type:"warning",message:e})}error(e){a.Z.create({type:"negative",message:e})}exception(e){e instanceof Error?this.error(e.message):this.error("An unexpected error occurred")}}const n=new r},2285:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>me});s(5663);var a=s(3673),r=s(1959),n=s(2323),o=s(8339),i=s(3517),c=s(9533),l=s(4446),u=s(568);const d=e=>((0,a.dD)("data-v-47c7366b"),e=e(),(0,a.Cn)(),e),g={class:"q-pa-md col-12"},p={class:"row"},w={class:"col-11 row"},v=d((()=>(0,a._)("div",{class:"col-4"},"カテゴリ",-1))),h={class:"col-8"},y={key:0},k={key:0},m={key:1},b={key:2},_=d((()=>(0,a._)("div",{class:"col-4"},"タグ",-1))),q={class:"col-8"},D={key:0},f=d((()=>(0,a._)("div",{class:"col-4"},"キーワード",-1))),x={class:"col-8"},C=d((()=>(0,a._)("div",{class:"col-4"},"未閲覧, 未提出",-1))),Z={class:"col-8"},T={key:0},L={key:0},A={key:1},j={key:1},E={key:2},R={key:0},U={key:1},N=d((()=>(0,a._)("div",{class:"col-12 tw-border-b tw-border-gray-500 q-pb-md tw-mb-2"},null,-1))),W=d((()=>(0,a._)("div",{class:"col-4"},"表示順",-1))),$={class:"col-8"},P={key:0},z={key:0},I={key:1},O={key:2},H={class:"col-1 row justify-center items-center"},S=d((()=>(0,a._)("div",{class:"col-12 tw-border-b tw-border-gray-500 q-pb-md tw-mb-2"},null,-1))),M={key:0},Q=["onClick"],V={class:"col-3 q-pa-sm"},B={class:"col-9 q-px-sm"},G={class:"row"},Y={class:"col-12"},F={class:"tw-text-lg"},K={class:"row"},J={class:"col-10 tw-mt-1"},X={class:"row"},ee={class:"row"},te={key:0},se={key:1},ae={key:0,class:"col-2"},re={key:1,class:"row justify-center items-center"},ne={key:2,class:"row text-right"},oe={class:"col-12"},ie={class:"desktop-only row justify-center tw-mt-5"},ce={__name:"ContentList",setup(e){const{isLoading:t}=(0,c.q)(),s=(0,o.tv)(),d=((0,r.iH)(u.AVATA_DEFAULT),(0,r.iH)({})),ce=(0,r.iH)([]),le=(0,r.iH)([]),ue=e=>e?e.length>20?`${e.substring(0,20)}...`:e:"",de=e=>"send"===e.reportstatus?"text-blue":i.Z.getDate()>i.Z.getDate(e.datereport)?"text-red":i.Z.getDate()>i.Z.getDate(e.datereport).subtract(u.DATE_WARNING,"days")?"text-orange":"",ge=()=>{ce.value.length>0&&le.value.push(...ce.value.splice(0,20))},pe=(e,t)=>{"video"===t?s.push({path:`/video/${e}`}):"audio"===t?s.push({path:`/audio/${e}`}):s.push({path:`/document/${e}`})},we=async()=>{const e=await l.Z.getListContent(d.value);ce.value=e,le.value=ce.value.splice(0,20)};return(0,a.bv)((async()=>{d.value=s.currentRoute.value.query,await we()})),(e,s)=>{const o=(0,a.up)("q-skeleton"),i=(0,a.up)("q-btn"),c=(0,a.up)("q-card-section"),l=(0,a.up)("q-card"),u=(0,a.up)("q-img"),we=(0,a.up)("q-page");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,r.SU)(t)?((0,a.wg)(),(0,a.j4)(o,{key:0,class:"window-height",square:""})):(0,a.kq)("",!0),(0,a.Wm)(we,{class:"col-xs-12 col-md-4 col-xl-3 q-ma-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a.Wm)(l,{class:"my-card rounded-lg tw-bg-rose-100"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a._)("div",w,[v,(0,a._)("div",h,[d.value.category?((0,a.wg)(),(0,a.iD)("div",y,["video"===d.value.category?((0,a.wg)(),(0,a.iD)("span",k,"動画")):"audio"===d.value.category?((0,a.wg)(),(0,a.iD)("span",m,"音声")):"document"===d.value.category?((0,a.wg)(),(0,a.iD)("span",b,"ドキュメント")):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]),_,(0,a._)("div",q,[(0,a.Uk)((0,n.zw)(ue(d.value.tag1))+" ",1),d.value.tag1&&d.value.tag2?((0,a.wg)(),(0,a.iD)("span",D,",")):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,n.zw)(ue(d.value.tag2)),1)]),f,(0,a._)("div",x,(0,n.zw)(ue(d.value.title)),1),C,(0,a._)("div",Z,[d.value.viewestatus?((0,a.wg)(),(0,a.iD)("div",T,["notseen"===d.value.viewestatus?((0,a.wg)(),(0,a.iD)("span",L,"未閲覧")):(0,a.kq)("",!0),"watched"===d.value.viewestatus?((0,a.wg)(),(0,a.iD)("span",A,"閲覧済")):(0,a.kq)("",!0)])):(0,a.kq)("",!0),d.value.reportstatus&&d.value.viewestatus?((0,a.wg)(),(0,a.iD)("span",j,",")):(0,a.kq)("",!0),d.value.reportstatus?((0,a.wg)(),(0,a.iD)("div",E,["unsent"===d.value.reportstatus?((0,a.wg)(),(0,a.iD)("span",R,"未提出")):(0,a.kq)("",!0),"send"===d.value.reportstatus?((0,a.wg)(),(0,a.iD)("span",U,"提出済")):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]),N,W,(0,a._)("div",$,[d.value.sort?((0,a.wg)(),(0,a.iD)("div",P,["newest"===d.value.sort?((0,a.wg)(),(0,a.iD)("span",z,"新着順")):"oldest"===d.value.sort?((0,a.wg)(),(0,a.iD)("span",I,"古い順")):((0,a.wg)(),(0,a.iD)("span",O,"提出期限順"))])):(0,a.kq)("",!0)])]),(0,a._)("div",H,[(0,a.Wm)(i,{flat:"",round:"",icon:"arrow_forward_ios",to:"/search-contents"})])])])),_:1})])),_:1})]),S,le.value.length>0?((0,a.wg)(),(0,a.iD)("div",M,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(le.value,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"row tw-border-b tw-border-gray-500 q-pb-md tw-mb-2 css-cursor",key:t,onClick:t=>pe(e.id,e.category)},[(0,a._)("div",V,[e.thumbnail?((0,a.wg)(),(0,a.j4)(u,{key:0,src:e.thumbnail},null,8,["src"])):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},["video"===e.category?((0,a.wg)(),(0,a.j4)(u,{key:0,src:"images/thumbnail_ movie"})):(0,a.kq)("",!0),"audtio"===e.category?((0,a.wg)(),(0,a.j4)(u,{key:1,src:"images/thumbnail_ audio"})):(0,a.kq)("",!0),"document"===e.category?((0,a.wg)(),(0,a.j4)(u,{key:2,src:"images/thumbnail_ doc"})):(0,a.kq)("",!0)],64))]),(0,a._)("div",B,[(0,a._)("div",G,[(0,a._)("div",Y,[(0,a._)("h5",F,(0,n.zw)(ue(e.title)),1)])]),(0,a._)("div",K,[(0,a._)("div",J,[(0,a._)("div",X,"投稿日："+(0,n.zw)(e.datesendreport),1),(0,a._)("div",ee,["on"!==e.reportonoff||e.datereport?"off"===e.reportonoff?((0,a.wg)(),(0,a.iD)("span",se)):((0,a.wg)(),(0,a.iD)("span",{key:2,class:(0,n.C_)(de(e))}," 提出期限："+(0,n.zw)(e.datereport),3)):((0,a.wg)(),(0,a.iD)("span",te," 提出期限： "))])]),"on"===e.reportonoff&&e.datereport?((0,a.wg)(),(0,a.iD)("div",ae,[(0,a.Wm)(u,{src:"send"===e.reportstatus?"images/pencil_blue.png":"images/pencil_gray.png",width:"30px"},null,8,["src"])])):(0,a.kq)("",!0)])])],8,Q)))),128))])):((0,a.wg)(),(0,a.iD)("div",re," 条件に合うデータがありません ")),ce.value.length>0?((0,a.wg)(),(0,a.iD)("div",ne,[(0,a._)("div",oe,[(0,a.Wm)(i,{flat:"",class:"tw-text-lg",onClick:ge},{default:(0,a.w5)((()=>[(0,a.Uk)("もっと見る")])),_:1})])])):(0,a.kq)("",!0),(0,a._)("div",ie,[(0,a.Wm)(i,{color:"primary",outline:"",label:"戻る",to:"/search-contents"})])])),_:1})],64)}}};var le=s(4260),ue=s(4103),de=s(4379),ge=s(151),pe=s(5589),we=s(8240),ve=s(4027),he=s(7518),ye=s.n(he);const ke=(0,le.Z)(ce,[["__scopeId","data-v-47c7366b"]]),me=ke;ye()(ce,"components",{QSkeleton:ue.ZP,QPage:de.Z,QCard:ge.Z,QCardSection:pe.Z,QBtn:we.Z,QImg:ve.Z})},7044:(e,t,s)=>{var a={"./base.repository":1701,"./member.repository":2703};function r(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id=7044}}]);