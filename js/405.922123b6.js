(globalThis["webpackChunkntv"]=globalThis["webpackChunkntv"]||[]).push([[405],{4567:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(1959),a=s(5331),n=s.n(a),o=s(120),i=s.n(o);const c=new(n())({allErrors:!0,removeAdditional:!0,useDefaults:!0,coerceTypes:!0,$data:!0});s(3611)(c),s(4007)(c),s(5917)(c),c.addKeyword({keyword:"is-checkout",validate:(e,t)=>{const s=i()(t),r=i()();return!!s&&(s.format(e)===t&&s.format("YYYYMMDD")>=r.format("YYYYMMDD"))},errors:!0}),c.addFormat("datetime-to",{validate:()=>!0,compare:(e,t)=>e&&t&&i()(e)&&i()(t)?i()(e)>i()(t)?1:i()(t)>i()(e)?-1:0:0}),c.addKeyword({keyword:"isNotEmpty",type:"string",validate:function(e,t){return"string"===typeof t&&""!==t.trim()||(this.errors=[{keyword:"isNotEmpty",params:{keyword:"isNotEmpty"}}],!1)},errors:!0});const l=c;function d(){const e=(0,r.iH)({}),t=(t,s)=>{const r=l.compile(t),a=r(s);if(r.errors){const t={};r.errors.forEach((e=>{const s=e.instancePath.slice(1,e.instancePath.length);t[s]||(t[s]=e.message)})),e.value=t}return a};return{errors:e,validateData:t}}},5786:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const r={companycode:{type:"string",minLength:1,pattern:"^[a-zA-z0-9_\\-\\+\\.]+$",maxLength:10},username:{type:"string",minLength:1,maxLength:100},password:{type:"string",minLength:8,maxLength:16,pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$"},mail:{type:"string",pattern:"^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$",maxLength:100},name:{type:"string",maxLength:40},type:{type:"integer",enum:[1,2,9]}},a=r},4446:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(2250),a=s.n(r);class n{getRepository(e){const t=s(7044)(`./${e}.repository`);return t.default}}const o=new n;class i{constructor(e){a()(this,"serviceName",void 0),a()(this,"dao",void 0),this.serviceName=e,this.dao=o.getRepository(e)}}var c=s(539);class l extends i{async login(e){const{signIn:t}=(0,c.t)(),s=await this.dao.login(e),{code:r,payload:a}=s;0===r&&t(a)}async checklogin(){const{signIn:e,signOut:t}=(0,c.t)();try{const t=await this.dao.checklogin(),{code:s,payload:r}=t;0===s&&e(r)}catch(s){t()}}async getDashboards(){const e=await this.dao.getDashboards(),{code:t,payload:s}=e;return 0===t?s:null}async getListContent(e){const t=await this.dao.getListContent(e),{code:s,payload:r}=t;return 0===s?r:null}async getContentById(e){const t=await this.dao.getContentById(e),{code:s,payload:r}=t;return 0===s?r:null}async getListTag(){const e=await this.dao.getListTag(),{code:t,payload:s}=e;return 0===t?s:null}async getSuggestList(){const e=await this.dao.getSuggestList(),{code:t,payload:s}=e;return 0===t?s:{}}async updateUser(e){const t=await this.dao.updateUser(e),{message:s}=t;return s}async deleteReport(e){const t=await this.dao.deleteReport(e),{message:s}=t;return s}async updateViewMember(e,t){const s=await this.dao.updateViewMember(e,t),{code:r}=s;return 0===r}async getNotices(){const e=await this.dao.getNotices(),{code:t,payload:s}=e;return 0===t?s:null}}const d=new l("member")},1701:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(2250),a=s.n(r),n=s(1661),o=s.n(n),i=s(52),c=s.n(i),l=s(397),d=s(9533),u=s(539);function p(e,t){const s=Object.assign(t||{},{params:e});return s}var g=new WeakMap,m=new WeakMap;class h{constructor(e){o()(this,g,{writable:!0,value:void 0}),o()(this,m,{writable:!0,value:void 0}),a()(this,"onRequest",(async e=>{await this.extendTokenValidityPeriod();const{token:t}=(0,u.t)();return e.headers&&(e.headers.Authorization=`Bearer ${t}`),e})),this.client=this.createAxiosClient(),this.servicePath=e}createAxiosClient(){const e=c().create({baseURL:void 0,headers:{"Content-type":"application/json","x-api-key":void 0}});return e.interceptors.request.use(this.onRequest,this.onRequestError),e}onRequestError(e){return Promise.reject(e)}async extendTokenValidityPeriod(){}request(e,t,s,r){const{setLoading:a}=(0,d.q)();return new Promise(((n,o)=>{a(!0);const i=Object.assign(r,{url:`${this.servicePath}${t}`,method:e,data:s});this.client.request(i).then((e=>{const t=e.data;0!==t.code&&(l.Z.error(t.message),o(t)),n(t)})).catch((e=>{if(c().isAxiosError(e))if(e.response)if(e.response.data){const t=e.response.data;o(t)}else o(e);else e.request,o(e);else o(e);l.Z.exception(e)})).finally((()=>{a(!1)}))}))}get(e,t,s){const r=p(t,s);return this.request("GET",e,null,r)}post(e,t,s){const r=p(t,s);return this.request("POST",e,t,r)}put(e,t,s){const r=p(t,s);return this.request("PUT",e,t,r)}delete(e,t,s){const r=p(t,s);return this.request("DELETE",e,null,r)}}class w{constructor(e){a()(this,"client",void 0),this.client=new h(e)}}},2703:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(1701);class a extends r["default"]{constructor(){super("/member")}find(e){return this.client.get("",e)}login(e){return this.client.post("/login",e)}checklogin(){return this.client.get("/checklogin")}getDashboards(){return this.client.get("/dashboards")}getListContent(e){return this.client.get("/contents",e)}getContentById(e){return this.client.get(`/contents/${e}`)}getListTag(){return this.client.get("/tags")}deleteReport(e){return this.client.delete(`/reports/${e}`)}getSuggestList(){return this.client.get("/suggest-title")}updateUser(e){return this.client.put("/users",e)}updateViewMember(e,t){return this.client.post(`/contents/${e}/viewed`,t)}getNotices(){return this.client.get("/notices")}}const n=new a},397:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});s(6701);var r=s(6417);class a{success(e){r.Z.create({type:"positive",message:e})}warning(e){r.Z.create({type:"warning",message:e})}error(e){r.Z.create({type:"negative",message:e})}exception(e){e instanceof Error?this.error(e.message):this.error("An unexpected error occurred")}}const n=new a},8405:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});s(5663);var r=s(3673),a=s(1959),n=s(8339),o=s(9533),i=s(4567),c=s(5786);const l={type:"object",required:["password","newPassword","email"],properties:{type:{type:"string",enum:["1","2"],errorMessage:{_:""}},password:{...c.Z.password,errorMessage:{_:"現在のパスワードを入力してください。"}},newPassword:{...c.Z.password,errorMessage:{_:"新しいパスワードを入力してください。"}},passwordConfirm:{type:"string",const:{$data:"1/passwordNew"},errorMessage:{_:"再確認のパスワードが一致していません。"}},email:{type:"string",errorMessage:{_:"再確認のパスワードが一致していません。"}}},additionalProperties:!1},d=l;var u=s(4446),p=s(539),g=s(397);const m={class:"row"},h={class:"q-pa-md col-12"},w={class:"tw-mt-5"},y=(0,r._)("span",null,"現在のパスワード",-1),v={class:"tw-mt-2"},f=(0,r._)("span",null,"新しいパスワード",-1),k=(0,r._)("br",null,null,-1),b=(0,r._)("label",{class:"text-grey text-caption"},"※英大文字小文字、数字を含む８文字以上の文字列",-1),q={class:"tw-mt-2"},x=(0,r._)("span",null,"新しいパスワードを再入力",-1),_={class:"text-center q-gutter-md tw-mt-2"},Z={__name:"Password",setup(e){const{isLoading:t}=(0,o.q)(),{validateData:s,errors:c}=(0,i.Z)(),l=(0,a.iH)(""),Z=(0,a.iH)(""),L=(0,a.iH)(""),C=(0,p.t)(),U=(0,n.tv)(),P=async()=>{const e={type:"1",password:l.value,newPassword:Z.value,passwordConfirm:L.value,email:C.user.mail},t=s(d,e);if(!t)return;delete e.passwordConfirm;const r=await u.Z.updateUser(e);r&&(g.Z.success(r),U.push("/user-setting"))},E=()=>{U.push("/user-setting")};return(e,s)=>{const n=(0,r.up)("q-skeleton"),o=(0,r.up)("q-input"),i=(0,r.up)("q-form"),d=(0,r.up)("q-btn"),u=(0,r.up)("q-page");return(0,a.SU)(t)?((0,r.wg)(),(0,r.j4)(n,{key:0,class:"window-height",square:""})):((0,r.wg)(),(0,r.j4)(u,{key:1,class:"col-xs-12 col-md-4 col-xl-3 q-ma-sm"},{default:(0,r.w5)((()=>[(0,r._)("div",m,[(0,r._)("div",h,[(0,r.Wm)(i,{class:"q-gutter-md"},{default:(0,r.w5)((()=>[(0,r._)("div",w,[y,(0,r.Wm)(o,{type:"password",outlined:"",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),maxlength:"32",error:!!(0,a.SU)(c).passwordCurrent,"error-message":(0,a.SU)(c).passwordCurrent},null,8,["modelValue","error","error-message"])]),(0,r._)("div",v,[f,k,b,(0,r.Wm)(o,{outlined:"",type:"password",modelValue:Z.value,"onUpdate:modelValue":s[1]||(s[1]=e=>Z.value=e),maxlength:"32",error:!!(0,a.SU)(c).passwordNew,"error-message":(0,a.SU)(c).passwordNew},null,8,["modelValue","error","error-message"])]),(0,r._)("div",q,[x,(0,r.Wm)(o,{outlined:"",type:"password",modelValue:L.value,"onUpdate:modelValue":s[2]||(s[2]=e=>L.value=e),maxlength:"32",error:!!(0,a.SU)(c).passwordConfirm,"error-message":(0,a.SU)(c).passwordConfirm},null,8,["modelValue","error","error-message"])])])),_:1}),(0,r._)("div",_,[(0,r.Wm)(d,{class:"desktop-only tw-w-28",outline:"",color:"primary",label:"戻る",size:"lg",onClick:E}),(0,r.Wm)(d,{class:"tw-w-28",color:"primary",label:"変更",size:"lg",onClick:P})])])])])),_:1}))}}};var L=s(4103),C=s(4379),U=s(8689),P=s(4842),E=s(8240),M=s(7518),V=s.n(M);const D=Z,N=D;V()(Z,"components",{QSkeleton:L.ZP,QPage:C.Z,QForm:U.Z,QInput:P.Z,QBtn:E.Z})},7044:(e,t,s)=>{var r={"./base.repository":1701,"./member.repository":2703};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id=7044}}]);