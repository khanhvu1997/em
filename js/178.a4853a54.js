(globalThis["webpackChunkntv"]=globalThis["webpackChunkntv"]||[]).push([[178],{4567:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(1959),r=a(5331),o=a.n(r),l=a(120),n=a.n(l);const i=new(o())({allErrors:!0,removeAdditional:!0,useDefaults:!0,coerceTypes:!0,$data:!0});a(3611)(i),a(4007)(i),a(5917)(i),i.addKeyword({keyword:"is-checkout",validate:(e,t)=>{const a=n()(t),s=n()();return!!a&&(a.format(e)===t&&a.format("YYYYMMDD")>=s.format("YYYYMMDD"))},errors:!0}),i.addFormat("datetime-to",{validate:()=>!0,compare:(e,t)=>e&&t&&n()(e)&&n()(t)?n()(e)>n()(t)?1:n()(t)>n()(e)?-1:0:0}),i.addKeyword({keyword:"isNotEmpty",type:"string",validate:function(e,t){return"string"===typeof t&&""!==t.trim()||(this.errors=[{keyword:"isNotEmpty",params:{keyword:"isNotEmpty"}}],!1)},errors:!0});const u=i;function c(){const e=(0,s.iH)({}),t=(t,a)=>{const s=u.compile(t),r=s(a);if(s.errors){const t={};s.errors.forEach((e=>{const a=e.instancePath.slice(1,e.instancePath.length);t[a]||(t[a]=e.message)})),e.value=t}return r};return{errors:e,validateData:t}}},8193:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const s={type:"object",required:[],properties:{category:{type:"string",enum:["video","audio","document"],errorMessage:{_:"xxxx"}},tag1:{type:"string"},tag2:{type:"string"},title:{type:"string"},viewestatus:{type:"string",enum:["notseen","watched"],errorMessage:{_:"xxxx"}},reportstatus:{type:"string",enum:["unsent","send"],errorMessage:{_:"xxxx"}},sort:{type:"string",enum:["newest","oldest","reported"],errorMessage:{_:"xxxx"}}},additionalProperties:!1},r={type:"object",required:[],properties:{category:{type:"string",enum:["video","audio","document"],errorMessage:{_:"xxxx"}},tag:{type:"object"},title:{type:"string"}},additionalProperties:!1},o={searchContentSchema:s,createViewSchema:r}},4446:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(2250),r=a.n(s);class o{getRepository(e){const t=a(7044)(`./${e}.repository`);return t.default}}const l=new o;class n{constructor(e){r()(this,"serviceName",void 0),r()(this,"dao",void 0),this.serviceName=e,this.dao=l.getRepository(e)}}var i=a(539);class u extends n{async login(e){const{signIn:t}=(0,i.t)(),a=await this.dao.login(e),{code:s,payload:r}=a;0===s&&t(r)}async checklogin(){const{signIn:e,signOut:t}=(0,i.t)();try{const t=await this.dao.checklogin(),{code:a,payload:s}=t;0===a&&e(s)}catch(a){t()}}async getDashboards(){const e=await this.dao.getDashboards(),{code:t,payload:a}=e;return 0===t?a:null}async getListContent(e){const t=await this.dao.getListContent(e),{code:a,payload:s}=t;return 0===a?s:null}async getContentById(e){const t=await this.dao.getContentById(e),{code:a,payload:s}=t;return 0===a?s:null}async getListTag(){const e=await this.dao.getListTag(),{code:t,payload:a}=e;return 0===t?a:null}async getSuggestList(){const e=await this.dao.getSuggestList(),{code:t,payload:a}=e;return 0===t?a:{}}async updateUser(e){const t=await this.dao.updateUser(e),{message:a}=t;return a}async deleteReport(e){const t=await this.dao.deleteReport(e),{message:a}=t;return a}async updateViewMember(e,t){const a=await this.dao.updateViewMember(e,t),{code:s}=a;return 0===s}async getNotices(){const e=await this.dao.getNotices(),{code:t,payload:a}=e;return 0===t?a:null}}const c=new u("member")},1701:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(2250),r=a.n(s),o=a(1661),l=a.n(o),n=a(52),i=a.n(n),u=a(397),c=a(9533),d=a(539);function p(e,t){const a=Object.assign(t||{},{params:e});return a}var v=new WeakMap,g=new WeakMap;class m{constructor(e){l()(this,v,{writable:!0,value:void 0}),l()(this,g,{writable:!0,value:void 0}),r()(this,"onRequest",(async e=>{await this.extendTokenValidityPeriod();const{token:t}=(0,d.t)();return e.headers&&(e.headers.Authorization=`Bearer ${t}`),e})),this.client=this.createAxiosClient(),this.servicePath=e}createAxiosClient(){const e=i().create({baseURL:void 0,headers:{"Content-type":"application/json","x-api-key":void 0}});return e.interceptors.request.use(this.onRequest,this.onRequestError),e}onRequestError(e){return Promise.reject(e)}async extendTokenValidityPeriod(){}request(e,t,a,s){const{setLoading:r}=(0,c.q)();return new Promise(((o,l)=>{r(!0);const n=Object.assign(s,{url:`${this.servicePath}${t}`,method:e,data:a});this.client.request(n).then((e=>{const t=e.data;0!==t.code&&(u.Z.error(t.message),l(t)),o(t)})).catch((e=>{if(i().isAxiosError(e))if(e.response)if(e.response.data){const t=e.response.data;l(t)}else l(e);else e.request,l(e);else l(e);u.Z.exception(e)})).finally((()=>{r(!1)}))}))}get(e,t,a){const s=p(t,a);return this.request("GET",e,null,s)}post(e,t,a){const s=p(t,a);return this.request("POST",e,t,s)}put(e,t,a){const s=p(t,a);return this.request("PUT",e,t,s)}delete(e,t,a){const s=p(t,a);return this.request("DELETE",e,null,s)}}class h{constructor(e){r()(this,"client",void 0),this.client=new m(e)}}},2703:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(1701);class r extends s["default"]{constructor(){super("/member")}find(e){return this.client.get("",e)}login(e){return this.client.post("/login",e)}checklogin(){return this.client.get("/checklogin")}getDashboards(){return this.client.get("/dashboards")}getListContent(e){return this.client.get("/contents",e)}getContentById(e){return this.client.get(`/contents/${e}`)}getListTag(){return this.client.get("/tags")}deleteReport(e){return this.client.delete(`/reports/${e}`)}getSuggestList(){return this.client.get("/suggest-title")}updateUser(e){return this.client.put("/users",e)}updateViewMember(e,t){return this.client.post(`/contents/${e}/viewed`,t)}getNotices(){return this.client.get("/notices")}}const o=new r},397:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});a(6701);var s=a(6417);class r{success(e){s.Z.create({type:"positive",message:e})}warning(e){s.Z.create({type:"warning",message:e})}error(e){s.Z.create({type:"negative",message:e})}exception(e){e instanceof Error?this.error(e.message):this.error("An unexpected error occurred")}}const o=new r},8178:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});a(5663);var s=a(3673),r=a(1959),o=a(8339),l=a(9533),n=a(8193),i=a(4567),u=a(4446);const c={class:"row"},d={class:"q-pa-md col-12"},p=(0,s._)("span",null,"カテゴリ",-1),v=(0,s._)("span",null,"タグ",-1),g=(0,s._)("span",null,"キーワード",-1),m={class:"row tw-border-b tw-border-gray-500 q-pb-md"},h={class:"col tw-mr-2"},y=(0,s._)("span",null,"閲覧",-1),w={class:"col tw-ml-2"},b=(0,s._)("span",null,"提出",-1),f={class:"tw-border-b tw-border-gray-500 q-pb-md"},x=(0,s._)("span",null,"表示順",-1),q={class:"row"},U={class:"col-5 tw-pr-2"},_={class:"col-7 tw-pl-2"},S={__name:"Search",setup(e){const{validateData:t,errors:a}=(0,i.Z)(),{isLoading:S}=(0,l.q)(),k=(0,o.tv)(),V=(0,r.iH)(""),C=(0,r.iH)({}),E=(0,r.iH)([{value:"",label:"指定なし"},{value:"video",label:"動画"},{value:"audio",label:"音声"},{value:"document",label:"ドキュメント "}]),H=(0,r.iH)([{value:"",label:"指定なし"}]),L=(0,r.iH)(""),Z=(0,r.iH)([{value:"",label:"指定なし"}]),M=(0,r.iH)(""),P=(0,r.iH)(""),D=(0,r.iH)(""),T=(0,r.iH)({}),W=(0,s.Fl)((()=>{const e=[];return T.value.length>0&&T.value.forEach((t=>{e.push(t.title)})),e})),N=(0,r.iH)([]),R=(0,r.iH)([{value:"",label:"指定なし"},{value:"notseen",label:"未閲覧"},{value:"watched",label:"閲覧済"}]),Y=(0,r.iH)(""),j=(0,r.iH)([{value:"",label:"指定なし"},{value:"unsent",label:"未提出"},{value:"send",label:"提出済"}]),O=(0,r.iH)("newest"),$=(0,r.iH)([{value:"newest",label:"新着順"},{value:"oldest",label:"古い順"},{value:"reported",label:"提出期限順"}]),A=()=>{V.value="",L.value="",M.value="",P.value="",D.value="",Y.value="",O.value="newest"},B=()=>{const e=[{value:"",label:"指定なし"}],t=[{value:"",label:"指定なし"}];L.value="",M.value="",V.value&&(C.value.tags1.forEach((t=>{t.category===V.value&&e.push({value:t.name,label:t.name})})),C.value.tags2.forEach((e=>{e.category===V.value&&t.push({value:e.name,label:e.name})}))),H.value=e,Z.value=t};(0,s.YP)(W,(e=>{N.value=e}));const F=(e,t)=>{t((()=>{if(""===e)N.value=[];else{const t=e.toLowerCase();N.value=W.value.filter((e=>e.toLowerCase().indexOf(t)>-1))}}))},I=()=>{const e={};V.value&&(e.category=V.value),L.value&&(e.tag1=L.value),M.value&&(e.tag2=M.value),P.value&&(e.title=P.value),D.value&&(e.viewestatus=D.value),Y.value&&(e.reportstatus=Y.value),O.value&&(e.sort=O.value);const a=t(n.Z.searchContentSchema,e);a&&k.push({path:"/content-list",query:e})};return(0,s.bv)((async()=>{C.value=await u.Z.getListTag(),T.value=await u.Z.getSuggestList()})),(e,t)=>{const o=(0,s.up)("q-skeleton"),l=(0,s.up)("q-select"),n=(0,s.up)("q-btn"),i=(0,s.up)("q-form"),u=(0,s.up)("q-page");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,r.SU)(S)?((0,s.wg)(),(0,s.j4)(o,{key:0,class:"window-height",square:""})):(0,s.kq)("",!0),(0,s.Wm)(u,{class:"col-xs-12 col-md-4 col-xl-3 q-ma-sm"},{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s._)("div",d,[(0,s.Wm)(i,{class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[p,(0,s.Wm)(l,{outlined:"",modelValue:V.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>V.value=e),t[1]||(t[1]=e=>B())],options:E.value,"emit-value":"","map-options":"",error:!!(0,r.SU)(a).category,"error-message":(0,r.SU)(a).category},null,8,["modelValue","options","error","error-message"])]),(0,s._)("div",null,[v,(0,s.Wm)(l,{outlined:"",modelValue:L.value,"onUpdate:modelValue":t[2]||(t[2]=e=>L.value=e),options:H.value,"emit-value":"","map-options":"",error:!!(0,r.SU)(a).tag1,"error-message":(0,r.SU)(a).tag1},null,8,["modelValue","options","error","error-message"]),(0,s.Wm)(l,{class:"tw-mt-2",outlined:"",modelValue:M.value,"onUpdate:modelValue":t[3]||(t[3]=e=>M.value=e),options:Z.value,"emit-value":"","map-options":"",error:!!(0,r.SU)(a).tag1,"error-message":(0,r.SU)(a).tag1},null,8,["modelValue","options","error","error-message"])]),(0,s._)("div",null,[g,(0,s.Wm)(l,{outlined:"",modelValue:P.value,"onUpdate:modelValue":t[4]||(t[4]=e=>P.value=e),"use-input":"","hide-selected":"","fill-input":"",options:N.value,onFilter:F,error:!!(0,r.SU)(a).title,"error-message":(0,r.SU)(a).title},null,8,["modelValue","options","error","error-message"])]),(0,s._)("div",m,[(0,s._)("div",h,[y,(0,s.Wm)(l,{outlined:"",modelValue:D.value,"onUpdate:modelValue":t[5]||(t[5]=e=>D.value=e),options:R.value,"emit-value":"","map-options":"",error:!!(0,r.SU)(a).viewestatus,"error-message":(0,r.SU)(a).viewestatus},null,8,["modelValue","options","error","error-message"])]),(0,s._)("div",w,[b,(0,s.Wm)(l,{outlined:"",modelValue:Y.value,"onUpdate:modelValue":t[6]||(t[6]=e=>Y.value=e),options:j.value,"emit-value":"","map-options":"",error:!!(0,r.SU)(a).reportstatus,"error-message":(0,r.SU)(a).reportstatus},null,8,["modelValue","options","error","error-message"])])]),(0,s._)("div",f,[x,(0,s.Wm)(l,{outlined:"",modelValue:O.value,"onUpdate:modelValue":t[7]||(t[7]=e=>O.value=e),options:$.value,"emit-value":"","map-options":"",error:!!(0,r.SU)(a).listSort,"error-message":(0,r.SU)(a).listSort},null,8,["modelValue","options","error","error-message"])]),(0,s._)("div",q,[(0,s._)("div",U,[(0,s.Wm)(n,{label:"クリア",class:"full-width",type:"button",size:"lg",onClick:A})]),(0,s._)("div",_,[(0,s.Wm)(n,{label:"検索",class:"full-width",type:"button",color:"teal",size:"lg",onClick:I})])])])),_:1})])])])),_:1})],64)}}};var k=a(4103),V=a(4379),C=a(8689),E=a(8877),H=a(8240),L=a(7518),Z=a.n(L);const M=S,P=M;Z()(S,"components",{QSkeleton:k.ZP,QPage:V.Z,QForm:C.Z,QSelect:E.Z,QBtn:H.Z})},7044:(e,t,a)=>{var s={"./base.repository":1701,"./member.repository":2703};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=o,e.exports=r,r.id=7044}}]);